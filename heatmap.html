<html>
<head>
    <link rel="stylesheet" href="css/leaflet.css">
    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
    <script src="js/leaflet.js"></script>
    <script src="js/leaflet-heat.js"></script>
</head>
<body>
<div id="heat-map" style="width: 100%; height: 100%">

</div>
<script>
    var map = L.map('heat-map', {
        center: {lat: 46.8, lng: 8.575172424316406},
        zoom: 8
    });
    // Mapbox map layer
    L.tileLayer('https://api.mapbox.com/styles/v1/ireneu/ciykdf581003h2ro22yelc6ro/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaXJlbmV1IiwiYSI6ImNpdGZsYzg5NDAwYXI0Nm81bGFqazd3bWsifQ.ZF9CzPxm3b4xGnWmdbPbaQ', {
        attribution: 'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
        maxZoom: 18,
        id: 'ciykdf581003h2ro22yelc6ro',
        accessToken: 'pk.eyJ1IjoiaXJlbmV1IiwiYSI6ImNpdGZsYzg5NDAwYXI0Nm81bGFqazd3bWsifQ.ZF9CzPxm3b4xGnWmdbPbaQ'
    }).addTo(map);
    // Show map scale
    L.control.scale({'imperial': false}).addTo(map);

    var accidents;
    $.getJSON('data/accidents.json', function (json) {
        accidents = json;
        var heat = L.heatLayer(get_points(), {radius: 10}).addTo(map)
    });


    function get_points() {
        var list = [];
        for (var accident in accidents) {
            list.push([accidents[accident].wgs84_coordinates[0], accidents[accident].wgs84_coordinates[1], 0.75]);
        }
        return list;
    }
</script>
</body>
</html>